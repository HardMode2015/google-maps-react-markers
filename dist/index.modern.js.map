{"version":3,"file":"index.modern.js","sources":["../src/hooks/useScript.js","../src/hooks/useGoogleMaps.js","../src/utils/utils.js","../src/map/overlay.js","../src/map/overlay-view.js","../src/map/markers.js","../src/map/map.js","../src/google-map.js"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { useState, useEffect } from 'react'\n\n/**\n * @description Hook to load external script.\n * @param {Object} script - Script to load.\n * @param {string} script.src - Script source.\n * @param {Object} [script.attributes] - Attributes to add to the script tag.\n * @param {Object} [script.callbacks] - Callbacks executed on completion.\n * @param {Function} [script.callbacks.onLoadCallback] - Callback executed on completion in case of success.\n * @param {Function} [script.callbacks.onErrorCallback] - Callbacks executed on completion in case of error.\n * @param {string} [script.elementIdToAppend] - HTML element id to append the script to. Default is HTML HEAD.\n * @returns {\"idle\" | \"loading\" | \"ready\" | \"error\"} status\n *\n * @example\n * const status = useScript({\n * \t\tsrc: \"https://script-to-load.js\",\n * \t\tattributes: { id: \"scriptId\", class: \"script-class\" },\n * \t\tcallbacks: {\n * \t\t\tonLoadCallback: onLoadFunc,\n * \t\t\tonErrorCallback: onErrorFunc,\n * \t\t},\n * \t\telementIdToAppend: \"script-container\"\n * })\n */\n\nexport const useScript = (\n\tscript = {\n\t\tsrc: '',\n\t\tattributes: {},\n\t\tcallbacks: { onLoadCallback: null, onErrorCallback: null },\n\t\telementIdToAppend: null,\n\t}\n) => {\n\t// Keep track of script status (\"idle\", \"loading\", \"ready\", \"error\")\n\tconst [status, setStatus] = useState(script.src ? 'loading' : 'idle')\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// Allow falsy src value if waiting on other data needed for\n\t\t\t// constructing the script URL passed to this hook.\n\t\t\tif (!script.src) {\n\t\t\t\tsetStatus('idle')\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// Fetch existing script element by src\n\t\t\t// It may have been added by another instance of this hook\n\t\t\tlet scriptToAdd = document.querySelector(`script[src=\"${script.src}\"]`)\n\t\t\tif (!scriptToAdd) {\n\t\t\t\t// Create script\n\t\t\t\tscriptToAdd = document.createElement('script')\n\t\t\t\tscriptToAdd.src = script.src\n\t\t\t\tscriptToAdd.async = true\n\t\t\t\tscriptToAdd.setAttribute('data-status', 'loading')\n\t\t\t\t// Add other script attributes, if they exist\n\t\t\t\tscript.attributes && Object.entries(script.attributes).length > 0\n\t\t\t\t\t? Object.entries(script.attributes).map(([key, value]) => scriptToAdd.setAttribute(key, value))\n\t\t\t\t\t: null\n\t\t\t\t// Add script to document body\n\t\t\t\tif (script.elementIdToAppend && document.getElementById(script.elementIdToAppend)) {\n\t\t\t\t\tdocument.getElementById(script.elementIdToAppend).appendChild(scriptToAdd)\n\t\t\t\t} else {\n\t\t\t\t\tdocument.body.appendChild(scriptToAdd)\n\t\t\t\t}\n\t\t\t\t// Store status in attribute on script\n\t\t\t\t// This can be read by other instances of this hook\n\t\t\t\tconst setAttributeFromEvent = (event) => {\n\t\t\t\t\tscriptToAdd.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error')\n\t\t\t\t}\n\t\t\t\tscriptToAdd.addEventListener('load', setAttributeFromEvent)\n\t\t\t\tscriptToAdd.addEventListener('error', setAttributeFromEvent)\n\t\t\t} else {\n\t\t\t\t// Grab existing script status from attribute and set to state.\n\t\t\t\tconst currentScriptStatus = scriptToAdd.getAttribute('data-status')\n\t\t\t\tswitch (currentScriptStatus) {\n\t\t\t\t\tcase 'load':\n\t\t\t\t\tcase 'ready':\n\t\t\t\t\t\tscript.callbacks?.onLoadCallback ? script.callbacks.onLoadCallback() : null\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\tscript.callbacks?.onErrorCallback ? script.callbacks.onErrorCallback() : null\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// loading: do nothing\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tsetStatus(currentScriptStatus)\n\t\t\t}\n\t\t\t// Script event handler to update status in state\n\t\t\t// Note: Even if the script already exists we still need to add\n\t\t\t// event handlers to update the state for this hook instance.\n\t\t\tconst setStateFromEvent = (event) => {\n\t\t\t\tevent.type === 'load'\n\t\t\t\t\t? script.callbacks?.onLoadCallback\n\t\t\t\t\t\t? script.callbacks.onLoadCallback()\n\t\t\t\t\t\t: null\n\t\t\t\t\t: script.callbacks?.onErrorCallback\n\t\t\t\t\t? script.callbacks.onErrorCallback()\n\t\t\t\t\t: null\n\t\t\t\tsetStatus(event.type === 'load' ? 'ready' : 'error')\n\t\t\t}\n\t\t\t// Add event listeners\n\t\t\tscriptToAdd.addEventListener('load', setStateFromEvent)\n\t\t\tscriptToAdd.addEventListener('error', setStateFromEvent)\n\t\t\t// Remove event listeners on cleanup\n\t\t\treturn () => {\n\t\t\t\tif (scriptToAdd) {\n\t\t\t\t\tscriptToAdd.removeEventListener('load', setStateFromEvent)\n\t\t\t\t\tscriptToAdd.removeEventListener('error', setStateFromEvent)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Re-run useEffect if script changes\n\t\t[script]\n\t)\n\treturn status\n}\n","import { useScript } from \"./useScript\";\n\n/**\n * @returns {\"idle\" | \"loading\" | \"ready\" | \"error\"} status\n */\nexport const useGoogleMaps = ({ apiKey, libraries = [] }) => {\n\tconst script = apiKey\n\t\t? {\n\t\t\t\tsrc: `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=${libraries?.join(\",\")}`,\n\t\t\t\tattributes: { id: \"googleMapsApi\" },\n\t\t  }\n\t\t: {\n\t\t\t\tsrc: `https://maps.googleapis.com/maps/api/js?libraries=${libraries?.join(\",\")}`,\n\t\t\t\tattributes: { id: \"googleMapsApi\" },\n\t\t};\n\n\treturn useScript(script);\n};\n","export const isArraysEqualEps = (arrayA, arrayB, eps) => {\n\tif (arrayA && arrayB) {\n\t\tfor (let i = 0; i !== arrayA.length; ++i) {\n\t\t\tif (Math.abs(arrayA[i] - arrayB[i]) > eps) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\treturn false\n}\n","import { element, number, object, shape, string } from 'prop-types'\n\n/**\n * @param {HTMLElement} container\n * @param {google.maps.MapPanes} pane\n * @param {google.maps.LatLng | google.maps.LatLngLiteral} position\n * @param {google.maps} maps\n * @returns {void}\n */\nconst createOverlay = ({ container, pane, position, maps }) => {\n\tclass Overlay extends maps.OverlayView {\n\t\tconstructor(container, pane, position) {\n\t\t\tsuper()\n\t\t\tthis.container = container\n\t\t\tthis.pane = pane\n\t\t\tthis.position = position\n\t\t}\n\n\t\t/**\n\t\t * onAdd is called when the map's panes are ready and the overlay has been\n\t\t * added to the map.\n\t\t */\n\t\tonAdd = () => {\n\t\t\t// Add the element to the pane.\n\t\t\tconst pane = this.getPanes()[this.pane]\n\t\t\tpane?.classList.add('google-map-markers-overlay')\n\t\t\tpane?.appendChild(this.container)\n\t\t}\n\n\t\tdraw = () => {\n\t\t\tconst projection = this.getProjection()\n\t\t\t// Computes the pixel coordinates of the given geographical location in the DOM element that holds the draggable map.\n\t\t\tconst point = projection.fromLatLngToDivPixel(this.position)\n\t\t\tif (point === null) return\n\t\t\tthis.container.style.transform = `translate(${point.x}px, ${point.y}px)`\n\t\t}\n\n\t\t/**\n\t\t * The onRemove() method will be called automatically from the API if\n\t\t * we ever set the overlay's map property to 'null'.\n\t\t */\n\t\tonRemove = () => {\n\t\t\tif (this.container.parentNode !== null) {\n\t\t\t\tthis.container.parentNode.removeChild(this.container)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn new Overlay(container, pane, position)\n}\n\ncreateOverlay.propTypes = {\n\tcontainer: element.isRequired,\n\tpane: string.isRequired,\n\tposition: shape({\n\t\tlat: number.isRequired,\n\t\tlng: number.isRequired,\n\t}).isRequired,\n\tmaps: object.isRequired,\n}\n\nexport default createOverlay\n","import { useEffect, useMemo } from 'react'\nimport { createPortal } from 'react-dom'\nimport createOverlay from './overlay'\n\n/**\n * @param {HTMLElement} container\n * @param {google.maps.MapPanes} pane - The pane on which to display the overlay. This is the Pane name, not the Pane itself. Defaults to floatPane.\n * @param {google.maps.LatLng | google.maps.LatLngLiteral} position\n * @returns {void}\n * @ref [MapPanes](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes)\n */\nconst OverlayView = ({ position, pane = 'floatPane', map, maps, zIndex, children }) => {\n\tconst container = useMemo(() => {\n\t\t// eslint-disable-next-line no-undef\n\t\tconst div = document.createElement('div')\n\t\tdiv.style.position = 'absolute'\n\t\treturn div\n\t}, [])\n\n\tconst overlay = useMemo(() => {\n\t\treturn createOverlay({ container, pane, position, maps })\n\t}, [container, maps, pane, position])\n\n\tuseEffect(() => {\n\t\tif (!overlay.map) {\n\t\t\toverlay?.setMap(map)\n\t\t\treturn () => {\n\t\t\t\toverlay?.setMap(null)\n\t\t\t}\n\t\t}\n\t\t// overlay depends on map, so we don't need to add it to the dependency array\n\t\t// otherwise, it will re-render the overlay every time the map changes\n\t\t//? added children to the dependency array to re-render the overlay when the children change\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [map, children])\n\n\t// to move the container to the foreground and background\n\tuseEffect(() => {\n\t\tcontainer.style.zIndex = `${zIndex}`\n\t}, [zIndex, container])\n\n\treturn createPortal(children, container)\n}\n\nexport default OverlayView\n","import { node, object } from 'prop-types'\nimport React, { Children, isValidElement, useMemo } from 'react'\nimport OverlayView from './overlay-view'\n\nconst MapMarkers = ({ children, map, maps }) => {\n\tconst markers = useMemo(() => {\n\t\tif (!map || !maps) return []\n\n\t\treturn Children.map(children, (child) => {\n\t\t\tif (isValidElement(child)) {\n\t\t\t\tconst latLng = { lat: child.props.lat, lng: child.props.lng }\n\t\t\t\t// set the map prop on the child component\n\t\t\t\treturn (\n\t\t\t\t\t<OverlayView position={latLng} map={map} maps={maps}>\n\t\t\t\t\t\t{child}\n\t\t\t\t\t</OverlayView>\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}, [children, map, maps])\n\n\treturn <div>{markers}</div>\n}\n\nMapMarkers.propTypes = {\n\t/**\n\t * The Markers on the Map.\n\t * @type {ReactNode}\n\t * @required\n\t */\n\tchildren: node.isRequired,\n\t/**\n\t * The Google Maps instance.\n\t * @type {object}\n\t * @required\n\t */\n\tmap: object,\n\t/**\n\t * The Google Maps API.\n\t * @type {object}\n\t * @required\n\t */\n\tmaps: object.isRequired,\n}\n\nexport default MapMarkers\n","import { arrayOf, func, node, number, object, oneOfType } from 'prop-types'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { isArraysEqualEps } from '../utils/utils'\nimport MapMarkers from './markers'\n\nconst EPS = 0.00001\n\nconst MapComponent = ({ children, style, defaultCenter, defaultZoom, onGoogleApiLoaded, onChange, ...props }) => {\n\tconst mapRef = useRef(null)\n\tconst prevBoundsRef = useRef(null)\n\tconst [map, setMap] = useState(null)\n\tconst [maps, setMaps] = useState(null)\n\tconst [googleApiCalled, setGoogleApiCalled] = useState(false)\n\n\tconst onIdle = useCallback(() => {\n\t\tconst zoom = map.getZoom()\n\t\tconst bounds = map.getBounds()\n\t\tconst centerLatLng = map.getCenter()\n\n\t\tconst ne = bounds.getNorthEast()\n\t\tconst sw = bounds.getSouthWest()\n\t\tconst boundsArray = [sw.lng(), sw.lat(), ne.lng(), ne.lat()]\n\n\t\tif (!isArraysEqualEps(boundsArray, prevBoundsRef.current, EPS)) {\n\t\t\tif (onChange) {\n\t\t\t\tonChange({\n\t\t\t\t\tzoom,\n\t\t\t\t\tcenter: [centerLatLng.lng(), centerLatLng.lat()],\n\t\t\t\t\tbounds,\n\t\t\t\t})\n\t\t\t}\n\t\t\tprevBoundsRef.current = boundsArray\n\t\t}\n\t}, [map, onChange])\n\n\tuseEffect(() => {\n\t\tif (mapRef.current && !map) {\n\t\t\tsetMap(\n\t\t\t\tnew window.google.maps.Map(mapRef.current, {\n\t\t\t\t\tcenter: defaultCenter,\n\t\t\t\t\tzoom: defaultZoom,\n\t\t\t\t\t...props,\n\t\t\t\t})\n\t\t\t)\n\t\t\tsetMaps(window.google.maps)\n\t\t}\n\t}, [defaultCenter, defaultZoom, map, mapRef, props])\n\n\tuseEffect(() => {\n\t\tif (map) {\n\t\t\tif (!googleApiCalled) {\n\t\t\t\tonGoogleApiLoaded({ map, maps, ref: mapRef.current })\n\t\t\t\tsetGoogleApiCalled(true)\n\t\t\t}\n\n\t\t\twindow.google.maps.event.clearListeners(map, 'idle')\n\t\t\t// Idle event is fired when the map becomes idle after panning or zooming.\n\t\t\twindow.google.maps.event.addListener(map, 'idle', onIdle)\n\t\t}\n\t}, [googleApiCalled, map, maps, onChange, onGoogleApiLoaded, onIdle])\n\n\tuseEffect(() => {\n\t\t// clear listeners on unmount\n\t\treturn () => {\n\t\t\tif (map) {\n\t\t\t\twindow.google.maps.event.clearListeners(map, 'idle')\n\t\t\t}\n\t\t}\n\t}, [map])\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div ref={mapRef} style={style} className=\"google-map\" />\n\t\t\t{children && map && maps && (\n\t\t\t\t<MapMarkers map={map} maps={maps}>\n\t\t\t\t\t{children}\n\t\t\t\t</MapMarkers>\n\t\t\t)}\n\t\t</React.Fragment>\n\t)\n}\n\nMapComponent.defaultProps = {\n\tstyle: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tmargin: 0,\n\t\tpadding: 0,\n\t\tposition: 'absolute',\n\t},\n\tonGoogleApiLoaded: () => {},\n\tonChange: () => {},\n}\n\nMapComponent.propTypes = {\n\t/**\n\t * The Markers on the Map.\n\t */\n\tchildren: oneOfType([arrayOf(node), node]),\n\tstyle: object,\n\tdefaultCenter: object.isRequired,\n\tdefaultZoom: number.isRequired,\n\tonGoogleApiLoaded: func,\n\tonChange: func,\n}\n\nexport default MapComponent\n","import { arrayOf, node, number, object, oneOfType, string } from 'prop-types'\nimport React, { forwardRef } from 'react'\nimport { useGoogleMaps } from './hooks/useGoogleMaps'\nimport MapComponent from './map/map'\n\nconst GoogleMap = forwardRef(function GoogleMap(\n\t{ apiKey, libraries, children, loadingContent, idleContent, errorContent, mapMinHeight, containerProps, ...props },\n\tref\n) {\n\tconst status = useGoogleMaps({ apiKey, libraries })\n\treturn (\n\t\t<div\n\t\t\tstyle={{ height: '100%', width: '100%', overflow: 'hidden', position: 'relative', minHeight: mapMinHeight }}\n\t\t\tref={ref}\n\t\t\t{...containerProps}\n\t\t>\n\t\t\t{status === 'ready' ? (\n\t\t\t\t<MapComponent {...props}>{children}</MapComponent>\n\t\t\t) : status === 'loading' ? (\n\t\t\t\tloadingContent\n\t\t\t) : status === 'idle' ? (\n\t\t\t\tidleContent\n\t\t\t) : status === 'error' ? (\n\t\t\t\terrorContent\n\t\t\t) : null}\n\t\t</div>\n\t)\n})\n\nGoogleMap.defaultProps = {\n\t...MapComponent.defaultProps,\n\tloadingContent: 'Google Maps is loading',\n\tidleContent: 'Google Maps is on idle',\n\terrorContent: 'Google Maps is on error',\n\tmapMinHeight: 'unset',\n\tapiKey: '',\n\tlibraries: ['places', 'geometry'],\n}\n\nGoogleMap.propTypes = {\n\t...MapComponent.propTypes,\n\t/**\n\t * The Markers on the Map.\n\t */\n\tchildren: oneOfType([node, arrayOf(node)]),\n\t/**\n\t * Content to be displayed while the map is loading.\n\t */\n\tloadingContent: node,\n\t/**\n\t * Content to be displayed while the map is idle.\n\t */\n\tidleContent: node,\n\t/**\n\t * Content to be displayed when there is an error loading the map.\n\t */\n\terrorContent: node,\n\t/**\n\t * The minimum height of the map.\n\t */\n\tmapMinHeight: oneOfType([number, string]),\n\t/**\n\t * Props to be passed to the container div.\n\t */\n\tcontainerProps: object,\n}\n\nexport default GoogleMap\n"],"names":["useScript","script","src","attributes","callbacks","onLoadCallback","onErrorCallback","elementIdToAppend","status","setStatus","useState","useEffect","scriptToAdd","document","querySelector","createElement","async","setAttribute","Object","entries","length","map","key","value","getElementById","appendChild","body","setAttributeFromEvent","event","type","addEventListener","currentScriptStatus","getAttribute","setStateFromEvent","removeEventListener","useGoogleMaps","apiKey","libraries","join","id","isArraysEqualEps","arrayA","arrayB","eps","i","Math","abs","createOverlay","container","pane","position","maps","Overlay","OverlayView","constructor","onAdd","getPanes","classList","add","draw","projection","getProjection","point","fromLatLngToDivPixel","style","transform","x","y","onRemove","parentNode","removeChild","propTypes","element","isRequired","string","shape","lat","number","lng","object","zIndex","children","useMemo","div","overlay","setMap","createPortal","MapMarkers","markers","Children","child","isValidElement","latLng","props","node","EPS","MapComponent","defaultCenter","defaultZoom","onGoogleApiLoaded","onChange","mapRef","useRef","prevBoundsRef","setMaps","googleApiCalled","setGoogleApiCalled","onIdle","useCallback","zoom","getZoom","bounds","getBounds","centerLatLng","getCenter","ne","getNorthEast","sw","getSouthWest","boundsArray","current","center","window","google","Map","ref","clearListeners","addListener","defaultProps","width","height","left","top","margin","padding","oneOfType","arrayOf","func","GoogleMap","forwardRef","loadingContent","idleContent","errorContent","mapMinHeight","containerProps","overflow","minHeight"],"mappings":"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"}